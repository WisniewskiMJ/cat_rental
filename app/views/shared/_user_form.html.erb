<%= form_with url: action_url, method: :post, local: true do |form| %>

  <%= form.hidden_field '_method', value: method %>
  <%= form.hidden_field 'authenticity_token', value: form_authenticity_token %>

  <div class="field">
    <%= form.label 'username', 'Username', class: 'label' %>
    <%= form.text_field 'user[username]', value: action == :edit ? user.username : '', class: 'input half-width' %>
  </div>

  <% unless action == :login %>
    <div class="field">
      <%= form.label 'email', 'Email address', class: 'label' %>
      <%= form.email_field 'user[email]', value: action == :edit ? user.email : '', class: 'input half-width' %>
    </div>
  <% end %>


  <div class="field">
    <%= form.label 'password', password_label, class: 'label' %>
    <%= form.password_field 'user[password]', class: 'input half-width' %>
  </div>

  <%= form.submit submit, class: 'button is-small is-secondary' %>

<% end %>